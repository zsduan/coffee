(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16360055"],{"159b":function(t,a,e){var n=e("da84"),i=e("fdbc"),s=e("17c2"),r=e("9112");for(var c in i){var o=n[c],l=o&&o.prototype;if(l&&l.forEach!==s)try{r(l,"forEach",s)}catch(u){l.forEach=s}}},"17c2":function(t,a,e){"use strict";var n=e("b727").forEach,i=e("a640"),s=e("ae40"),r=i("forEach"),c=s("forEach");t.exports=r&&c?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,a,e){"use strict";var n=e("23e7"),i=e("17c2");n({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},5172:function(t,a,e){"use strict";e("45e1"),e("5128"),e("b062"),e("b0d4"),e("8063"),e("a2ba"),e("368d")},"65f0":function(t,a,e){var n=e("861d"),i=e("e8b5"),s=e("b622"),r=s("species");t.exports=function(t,a){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)?n(e)&&(e=e[r],null===e&&(e=void 0)):e=void 0),new(void 0===e?Array:e)(0===a?0:a)}},"93ab":function(t,a,e){"use strict";var n=e("e9b8"),i=e.n(n);i.a},a640:function(t,a,e){"use strict";var n=e("d039");t.exports=function(t,a){var e=[][t];return!!e&&n((function(){e.call(null,a||function(){throw 1},1)}))}},b64b:function(t,a,e){var n=e("23e7"),i=e("7b0b"),s=e("df75"),r=e("d039"),c=r((function(){s(1)}));n({target:"Object",stat:!0,forced:c},{keys:function(t){return s(i(t))}})},b727:function(t,a,e){var n=e("0366"),i=e("44ad"),s=e("7b0b"),r=e("50c4"),c=e("65f0"),o=[].push,l=function(t){var a=1==t,e=2==t,l=3==t,u=4==t,f=6==t,d=5==t||f;return function(v,p,h,m){for(var _,b,g=s(v),C=i(g),k=n(p,h,3),y=r(C.length),O=0,S=m||c,L=a?S(v,y):e?S(v,0):void 0;y>O;O++)if((d||O in C)&&(_=C[O],b=k(_,O,g),t))if(a)L[O]=b;else if(b)switch(t){case 3:return!0;case 5:return _;case 6:return O;case 2:o.call(L,_)}else if(u)return!1;return f?-1:l||u?u:L}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},bf82:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"order"},[e("div",[e("van-nav-bar",{staticClass:"nav",attrs:{title:"订单"},on:{"click-left":t.goMenu},scopedSlots:t._u([{key:"left",fn:function(){return[e("van-icon",{attrs:{name:"home-o",size:"24"}})]},proxy:!0}])})],1),e("div",{staticClass:"white"}),e("div",{staticClass:"orderNav"},[e("van-tabs",{attrs:{animated:"",color:"#FE874E"},on:{click:t.changeTibs},model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[e("van-tab",{attrs:{title:"全部"}},["string"==typeof t.all?e("div",[e("van-empty",{attrs:{description:"这里还没有数据哟~"}},[e("van-button",{staticClass:"bottom-button",attrs:{color:"#FE874E",round:""},on:{click:t.goMenu}},[t._v("去逛逛")])],1)],1):t._e(),t._l(t.oids,(function(a,n){return e("div",{key:n,staticClass:"content"},[e("div",{staticClass:"title clearfix"},[e("span",{staticClass:"fl left"},[t._v(t._s(a))]),1==t.all[a].status?e("span",{staticClass:"fr right",on:{click:function(e){return t.confirmOrder(a)}}},[t._v("确认收货")]):t._e(),2==t.all[a].status?e("span",{staticClass:"fr right",on:{click:function(e){return t.delData(a)}}},[e("van-icon",{attrs:{name:"delete"}})],1):t._e(),2==t.all[a].status?e("span",{staticClass:"fr right"},[t._v("已收货")]):t._e()]),t._l(t.all[a].data,(function(t,a){return e("div",{key:a},[e("van-card",{attrs:{num:t.count,price:t.price,desc:t.rule,title:t.name,thumb:t.smallImg}})],1)})),e("div",{staticClass:"bottom clearfix"},[e("span",{staticClass:"fl left"},[t._v(t._s(t.all[a].createdAt.substr(0,10)))]),e("span",{staticClass:"fr right"},[e("span",[t._v("共计"),e("span",[t._v(t._s(t.numprice[2*n]))]),t._v("件商品，共计")]),e("span",[t._v("￥"+t._s(t.numprice[2*n+1]))])])])],2)}))],2),e("van-tab",{attrs:{title:"待收货"}},[0==t.wait.length?e("div",[e("van-empty",{attrs:{description:"这里还没有数据哟~"}},[e("van-button",{staticClass:"bottom-button",attrs:{color:"#FE874E",round:""},on:{click:t.goMenu}},[t._v("去逛逛")])],1)],1):t._e(),t._l(t.oids,(function(a,n){return e("div",{key:n,staticClass:"content"},[e("div",{staticClass:"title clearfix"},[e("span",{staticClass:"fl left"},[t._v(t._s(a))]),1==t.all[a].status?e("span",{staticClass:"fr right",on:{click:function(e){return t.confirmOrder(a)}}},[t._v("确认收货")]):t._e(),2==t.all[a].status?e("span",{staticClass:"fr right",on:{click:function(e){return t.delData(a)}}},[e("van-icon",{attrs:{name:"delete"}})],1):t._e(),2==t.all[a].status?e("span",{staticClass:"fr right"},[t._v("已收货")]):t._e()]),t._l(t.all[a].data,(function(t,a){return e("div",{key:a},[e("van-card",{attrs:{num:t.count,price:t.price,desc:t.rule,title:t.name,thumb:t.smallImg}})],1)})),e("div",{staticClass:"bottom clearfix"},[e("span",{staticClass:"fl left"},[t._v(t._s(t.all[a].createdAt.substr(0,10)))]),e("span",{staticClass:"fr right"},[e("span",[t._v("共计"),e("span",[t._v(t._s(t.numprice[2*n]))]),t._v("件商品，共计")]),e("span",[t._v("￥"+t._s(t.numprice[2*n+1]))])])])],2)}))],2),e("van-tab",{attrs:{title:"已收货"}},[0==t.confirm.length?e("div",[e("van-empty",{attrs:{description:"这里还没有数据哟~"}},[e("van-button",{staticClass:"bottom-button",attrs:{color:"#FE874E",round:""},on:{click:t.goMenu}},[t._v("去逛逛")])],1)],1):t._e(),t._l(t.oids,(function(a,n){return e("div",{key:n,staticClass:"content"},[e("div",{staticClass:"title clearfix"},[e("span",{staticClass:"fl left"},[t._v(t._s(a))]),1==t.all[a].status?e("span",{staticClass:"fr right",on:{click:function(e){return t.confirmOrder(a)}}},[t._v("确认收货")]):t._e(),2==t.all[a].status?e("span",{staticClass:"fr right",on:{click:function(e){return t.delData(a)}}},[e("van-icon",{attrs:{name:"delete"}})],1):t._e(),2==t.all[a].status?e("span",{staticClass:"fr right"},[t._v("已收货")]):t._e()]),t._l(t.all[a].data,(function(t,a){return e("div",{key:a},[e("van-card",{attrs:{num:t.count,price:t.price,desc:t.rule,title:t.name,thumb:t.smallImg}})],1)})),e("div",{staticClass:"bottom clearfix"},[e("span",{staticClass:"fl left"},[t._v(t._s(t.all[a].createdAt.substr(0,10)))]),e("span",{staticClass:"fr right"},[e("span",[t._v("共计"),e("span",[t._v(t._s(t.numprice[2*n]))]),t._v("件商品，共计")]),e("span",[t._v("￥"+t._s(t.numprice[2*n+1]))])])])],2)}))],2)],1)],1)])},i=[],s=(e("4160"),e("c975"),e("b64b"),e("159b"),e("5172"),e("0a68")),r={name:"Order",mounted:function(){this.getOrderData()},data:function(){return{active:0,all:"",wait:0,confirm:0,numprice:[],oids:[]}},methods:{goMenu:function(){this.$router.push({name:"Menu"})},getOrderData:function(){var t=this,a=localStorage.getItem("__Tk");void 0==a&&this.$router.push({name:"Login"}),s["a"].loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"get",url:"/findOrder",params:{appkey:this.appkey,tokenString:a,status:this.active}}).then((function(a){if(s["a"].clear(),Object(s["a"])(a.data.msg),7e4==a.data.code){a.data.result.sort((function(t,a){return new Date(a.createdAt).getTime()-new Date(t.createdAt).getTime()}));var e=[];a.data.result.forEach((function(t){-1==e.indexOf(t.oid)&&e.push(t.oid)})),t.oids=e;var n=[];for(var i in a.data.result.forEach((function(t){n[t.oid]?n[t.oid].data.push(t):n[t.oid]={data:[t],status:t.status,createdAt:t.createdAt}})),t.all=n,t.all)t.sumtotal(t.all[i].data);1==t.active&&(t.wait=Object.keys(t.all)),2==t.active&&(t.confirm=Object.keys(t.all))}})).catch((function(t){s["a"].clear()}))},sumtotal:function(t){for(var a=0,e=0,n=0;n<t.length;n++)a+=t[n].count,e+=t[n].count*t[n].price;this.numprice.push(a),this.numprice.push(e)},changeTibs:function(){this.getOrderData()},confirmOrder:function(t){var a=this,e=localStorage.getItem("__Tk");s["a"].loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/receive",data:{appkey:this.appkey,tokenString:e,oid:t}}).then((function(t){s["a"].clear(),8e4==t.data.code&&(Object(s["a"])(t.data.msg),a.getOrderData())})).catch((function(t){}))},delData:function(t){var a=this,e=localStorage.getItem("__Tk");s["a"].loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/removeOrder",data:{appkey:this.appkey,tokenString:e,oid:t}}).then((function(t){s["a"].clear(),9e4==t.data.code&&(Object(s["a"])(t.data.msg),a.getOrderData())})).catch((function(t){}))}}},c=r,o=(e("93ab"),e("2877")),l=Object(o["a"])(c,n,i,!1,null,"b391b912",null);a["default"]=l.exports},c975:function(t,a,e){"use strict";var n=e("23e7"),i=e("4d64").indexOf,s=e("a640"),r=e("ae40"),c=[].indexOf,o=!!c&&1/[1].indexOf(1,-0)<0,l=s("indexOf"),u=r("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:o||!l||!u},{indexOf:function(t){return o?c.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},e9b8:function(t,a,e){},fdbc:function(t,a){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-16360055.7717fd7c.js.map