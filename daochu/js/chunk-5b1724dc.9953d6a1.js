(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b1724dc"],{"159b":function(t,e,s){var a=s("da84"),i=s("fdbc"),r=s("17c2"),n=s("9112");for(var c in i){var o=a[c],d=o&&o.prototype;if(d&&d.forEach!==r)try{n(d,"forEach",r)}catch(u){d.forEach=r}}},"17c2":function(t,e,s){"use strict";var a=s("b727").forEach,i=s("a640"),r=s("ae40"),n=i("forEach"),c=r("forEach");t.exports=n&&c?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,s){"use strict";var a=s("23e7"),i=s("17c2");a({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},5172:function(t,e,s){"use strict";s("45e1"),s("5128"),s("b062"),s("b0d4"),s("8063"),s("a2ba"),s("368d")},"65f0":function(t,e,s){var a=s("861d"),i=s("e8b5"),r=s("b622"),n=r("species");t.exports=function(t,e){var s;return i(t)&&(s=t.constructor,"function"!=typeof s||s!==Array&&!i(s.prototype)?a(s)&&(s=s[n],null===s&&(s=void 0)):s=void 0),new(void 0===s?Array:s)(0===e?0:e)}},a640:function(t,e,s){"use strict";var a=s("d039");t.exports=function(t,e){var s=[][t];return!!s&&a((function(){s.call(null,e||function(){throw 1},1)}))}},b0c0:function(t,e,s){var a=s("83ab"),i=s("9bf2").f,r=Function.prototype,n=r.toString,c=/^\s*function ([^ (]*)/,o="name";a&&!(o in r)&&i(r,o,{configurable:!0,get:function(){try{return n.call(this).match(c)[1]}catch(t){return""}}})},b727:function(t,e,s){var a=s("0366"),i=s("44ad"),r=s("7b0b"),n=s("50c4"),c=s("65f0"),o=[].push,d=function(t){var e=1==t,s=2==t,d=3==t,u=4==t,l=6==t,h=5==t||l;return function(f,m,p,v){for(var g,b,S=r(f),y=i(S),L=a(m,p,3),k=n(y.length),A=0,_=v||c,C=e?_(f,k):s?_(f,0):void 0;k>A;A++)if((h||A in y)&&(g=y[A],b=L(g,A,S),t))if(e)C[A]=b;else if(b)switch(t){case 3:return!0;case 5:return g;case 6:return A;case 2:o.call(C,g)}else if(u)return!1;return l?-1:d||u?u:C}};t.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6)}},d92c:function(t,e,s){},e786:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"placeOrder"},[s("div",[s("van-nav-bar",{staticClass:"nav",attrs:{title:"确认支付","left-text":"返回","left-arrow":""},on:{"click-left":t.goback}})],1),s("div",{staticClass:"whit"}),s("div",{staticClass:"address"},[s("span",{on:{click:t.changeAddress}},[t._v("请选择收货地址")]),s("div",{staticClass:"addressitem"},[s("p",{staticClass:"title"},[t._v("当前地址：")]),s("p",[t._v("姓名："+t._s(t.current.name))]),s("p",[t._v("电话："+t._s(t.current.tel))]),s("p",[t._v("地址："+t._s(t.current.address))])])]),s("van-submit-bar",{attrs:{price:100*this.numprice[1],"button-text":"立即支付"},on:{submit:t.sbumitOrder}}),s("div",{staticClass:"showgoods"},t._l(t.commodityData,(function(t,e){return s("van-card",{attrs:{num:t.count,price:t.price,desc:t.rule,title:t.name,thumb:t.small_img}})})),1),s("div",{staticClass:"total clearfix"},[s("p",{staticClass:"fr"},[s("span",[t._v("共计"),s("span",{staticClass:"num"},[t._v(t._s(t.numprice[0]))]),t._v("件商品，共计")]),s("span",{staticClass:"price"},[t._v("￥"+t._s(t.numprice[1]))])])]),s("van-action-sheet",{attrs:{title:"请选择地址"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("div",{staticClass:"content-show"},[s("van-address-list",{attrs:{list:t.list,"default-tag-text":"默认"},on:{add:t.onAdd,edit:t.onEdit,select:t.switchAddress},model:{value:t.chosenAddressId,callback:function(e){t.chosenAddressId=e},expression:"chosenAddressId"}})],1)])],1)},i=[],r=(s("4160"),s("b0c0"),s("159b"),s("5172"),s("0a68")),n={name:"PlaceOrder",mounted:function(){this.getSidsAndGoods(),this.selectAddress()},data:function(){return{show:!1,chosenAddressId:"1",list:[],commodityData:[],numprice:[],current:{}}},methods:{goback:function(){this.$router.go(-1)},onAdd:function(){this.$router.push({name:"Address"})},onEdit:function(t,e){this.$router.push({name:"Address",query:{aid:t.aid}})},changeAddress:function(){this.show=!0},getSidsAndGoods:function(){var t=this,e=localStorage.getItem("__Tk");void 0==e&&this.$router.push({name:"Login"});var s=localStorage.getItem("putsids");r["a"].loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"get",url:"/commitShopcart",params:{appkey:this.appkey,tokenString:e,sids:s}}).then((function(e){r["a"].clear(),t.commodityData=e.data.result,t.sumtotal()})).catch((function(t){r["a"].clear()}))},sumtotal:function(){for(var t=0,e=0,s=0;s<this.commodityData.length;s++)t+=this.commodityData[s].count,e+=this.commodityData[s].count*this.commodityData[s].price;this.numprice.push(t),this.numprice.push(e)},selectAddress:function(){var t=this,e=localStorage.getItem("__Tk");r["a"].loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"get",url:"/findAddress",params:{appkey:this.appkey,tokenString:e}}).then((function(e){if(r["a"].clear(),2e4==e.data.code){e.data.result.forEach((function(e){var s={id:e.id,tel:e.tel,name:e.name,address:e.province+e.county+e.city+e.addressDetail,isDefault:Boolean(e.isDefault),aid:e.aid};t.list.push(s)}));for(var s=0,a=0;a<t.list.length;a++)t.list[a].isDefault&&(s=a);t.chosenAddressId=t.list[s].id,t.current=t.list[s]}})).catch((function(t){r["a"].clear()}))},switchAddress:function(t,e){this.current=t,this.show=!1},sbumitOrder:function(){var t=this,e=localStorage.getItem("__Tk"),s=localStorage.getItem("putsids");r["a"].loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/pay",data:{appkey:this.appkey,tokenString:e,sids:s,phone:this.current.tel,address:this.current.address,receiver:this.current.name}}).then((function(e){r["a"].clear(),6e4==e.data.code&&(Object(r["a"])(e.data.msg),t.$router.push({name:"Order"}))})).catch((function(t){r["a"].clear()}))}}},c=n,o=(s("ee77"),s("2877")),d=Object(o["a"])(c,a,i,!1,null,"79c6c416",null);e["default"]=d.exports},ee77:function(t,e,s){"use strict";var a=s("d92c"),i=s.n(a);i.a},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-5b1724dc.9953d6a1.js.map