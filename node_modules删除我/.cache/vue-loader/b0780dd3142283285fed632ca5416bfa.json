{"remainingRequest":"D:\\培训\\提交项目\\my-project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\培训\\提交项目\\my-project\\src\\views\\Address.vue?vue&type=style&index=0&id=3080fcdb&lang=less&scoped=true&","dependencies":[{"path":"D:\\培训\\提交项目\\my-project\\src\\views\\Address.vue","mtime":1594429894193},{"path":"D:\\培训\\提交项目\\my-project\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\培训\\提交项目\\my-project\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\培训\\提交项目\\my-project\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\培训\\提交项目\\my-project\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\培训\\提交项目\\my-project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\培训\\提交项目\\my-project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKL2RlZXAvIC52YW4tYnV0dG9uLS1kYW5nZXJ7CiAgYmFja2dyb3VuZDojRkU4NjREOyAKICBib3JkZXI6I0ZFODY0RDsKfQo="},{"version":3,"sources":["Address.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+PA;AACA;AACA;AACA","file":"Address.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"address\">\r\n    <!-- 显示nav -->\r\n    <div>\r\n      <van-nav-bar :title=\"title\" left-text=\"返回\"  class=\"nav\" left-arrow @click-left=\"goback\">\r\n      </van-nav-bar>\r\n    </div>\r\n    <van-address-edit\r\n      :area-list=\"areaList\"\r\n      show-postal\r\n      show-delete\r\n      show-set-default\r\n      show-search-result\r\n      :address-info=\"addressList\"\r\n      :area-columns-placeholder=\"['请选择', '请选择', '请选择']\"\r\n      @save=\"onSave\"\r\n      @delete=\"onDelete\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport areaList from \"../assets/city.js\"\r\n\r\nimport { Toast } from 'vant';\r\n// 提示框\r\nimport { Dialog } from 'vant';\r\n\r\nexport default {\r\n  name: 'Address',\r\n  mounted(){\r\n    this.get();\r\n  },\r\n  data() {\r\n    return {\r\n      // 地址数据\r\n      areaList:{},\r\n      // 地址信息\r\n      addressList:{\r\n        // 姓名\r\n        name:\"\",\r\n        // 电话\r\n        tel:\"\",\r\n        // 省份\r\n        province:\"\",\r\n        // 城市\r\n        city:\"\",\r\n        // 区县\r\n        county:\"\",\r\n        // 详细地址\r\n        addressDetail:\"\",\r\n        // 地区编码\r\n        areaCode:\"\",\r\n        // 邮政编码\r\n        postalCode:\"\",\r\n        // 默认地址\r\n        isDefault:\"\"\r\n      },\r\n      // 标题名称\r\n      title:\"新增地址\",\r\n      // 获取地址id\r\n      aid:\"\"\r\n    }\r\n  },\r\n  methods:{\r\n    get(){\r\n      // 获取本地数据\r\n      let tokenString = localStorage.getItem(\"__Tk\");\r\n      //判断是否登录\r\n      if (tokenString == undefined) {\r\n        this.$router.push({name:\"Login\"});\r\n      }\r\n\r\n      this.areaList = areaList;\r\n      let queryParams = this.$route.query;\r\n      this.aid = queryParams.aid;\r\n      if (this.aid) {\r\n        this.title = \"编辑地址\";\r\n\r\n        //开启加载提示\r\n        Toast.loading({\r\n            message: \"加载中...\",\r\n            forbidClick: true,\r\n            //延迟自动关闭加载提示，如果该值为0，则不会自动关闭\r\n            duration: 0\r\n        });\r\n        // 开始查询地址\r\n        this.axios({\r\n          method:\"get\",\r\n          url:\"/findAddressByAid\",\r\n          params:{\r\n            appkey:this.appkey,\r\n            tokenString,\r\n            aid:this.aid\r\n          }\r\n        }).then(result =>{\r\n          Toast.clear();\r\n          if (result.data.code == 40000) {\r\n            for (let key in this.addressList) {\r\n              this.addressList[key] = result.data.result[0][key];\r\n            }\r\n            this.addressList.isDefault = Boolean(this.addressList.isDefault);\r\n          }\r\n        }).catch(err => {\r\n          Toast.clear();\r\n          \r\n        })\r\n      }\r\n    },\r\n    // 回到上一页\r\n    goback(){\r\n      this.$router.go(-1);\r\n    },\r\n    // 保存地址\r\n  \tonSave(content) {\r\n      // 获取本地数据\r\n      let tokenString = localStorage.getItem(\"__Tk\");\r\n      //开启加载提示\r\n      Toast.loading({\r\n          message: \"加载中...\",\r\n          forbidClick: true,\r\n          //延迟自动关闭加载提示，如果该值为0，则不会自动关闭\r\n          duration: 0\r\n      });\r\n\r\n      // 修改地址\r\n      if (this.aid) {\r\n        // 定义变量看是否是修改了地址\r\n        let falge = 0;\r\n        for (let key in this.addressList) {\r\n          if (this.addressList[key] != content[key]) {\r\n            falge = 1;\r\n          }\r\n        }\r\n        if (falge) {\r\n          let data = {\r\n            name: \"\",\r\n            tel: \"\",\r\n            province: \"\",\r\n            city: \"\",\r\n            county: \"\",\r\n            addressDetail: \"\",\r\n            areaCode: \"\",\r\n            postalCode: \"\",\r\n            isDefault: \"\"\r\n          }\r\n\r\n          // 拷贝地址\r\n          for (let key in data) {\r\n            data[key] = content[key];\r\n          }\r\n\r\n          data.appkey = this.appkey;\r\n          data.tokenString = tokenString;\r\n          data.isDefault = Number(data.isDefault);\r\n          data.aid = this.aid;\r\n\r\n          // 开始请求数据\r\n          this.axios({\r\n            method:\"POST\",\r\n            url:\"/editAddress\",\r\n            data,\r\n          }).then(result => {\r\n            Toast.clear();\r\n            if (result.data.code == 30000) {\r\n              Toast.clear();\r\n              Toast(result.data.msg);\r\n              this.$router.push({name:\"PlaceOrder\"})\r\n            }\r\n            \r\n          }).catch(err => {\r\n            Toast.clear();\r\n            \r\n          })\r\n        }\r\n        return;\r\n      }\r\n\r\n      this.addressList = content;\r\n      // 数据获取\r\n      let data = {\r\n        name: \"\",\r\n        tel: \"\",\r\n        province: \"\",\r\n        city: \"\",\r\n        county: \"\",\r\n        addressDetail: \"\",\r\n        areaCode: \"\",\r\n        postalCode: \"\",\r\n        isDefault: \"\"\r\n      };\r\n\r\n      // 拷贝对象\r\n      for (let key in data) {\r\n        data[key] = content[key];\r\n      }\r\n\r\n      data.appkey = this.appkey;\r\n      data.tokenString = tokenString;\r\n      data.isDefault = Number(data.isDefault);\r\n\r\n      // 开始请求数据\r\n      this.axios({\r\n        method:\"POST\",\r\n        url:\"/addAddress\",\r\n        data,\r\n      }).then(result => {\r\n        Toast.clear();\r\n        if (result.data.code == 9000) {\r\n          Toast(result.data.msg);\r\n          this.$router.push({name:\"PlaceOrder\"})\r\n        }\r\n      }).catch(err => {\r\n        Toast.clear();\r\n        \r\n      })\r\n    },\r\n    // 删除地址\r\n    onDelete() {\r\n      // 获取本地数据\r\n      let tokenString = localStorage.getItem(\"__Tk\");\r\n      //开启加载提示\r\n      Toast.loading({\r\n          message: \"加载中...\",\r\n          forbidClick: true,\r\n          //延迟自动关闭加载提示，如果该值为0，则不会自动关闭\r\n          duration: 0\r\n      });\r\n      this.axios({\r\n        method:\"POST\",\r\n        url:\"/deleteAddress\",\r\n        data:{\r\n          appkey:this.appkey,\r\n          tokenString,\r\n          aid:this.aid\r\n        }\r\n      }).then(result =>{\r\n        Toast.clear();\r\n        if (result.data.code == 10000) {\r\n          this.$router.push({name:\"PlaceOrder\"})\r\n        }else {\r\n          Toast(result.data.msg);\r\n        }\r\n      }).catch(err =>{\r\n        Toast.clear();\r\n        \r\n      })\r\n    },\r\n    \r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  /deep/ .van-button--danger{\r\n    background:#FE864D; \r\n    border:#FE864D;\r\n  }\r\n</style>"]}]}