{"remainingRequest":"D:\\培训\\提交项目\\my-project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\培训\\提交项目\\my-project\\src\\views\\mainViews\\My.vue?vue&type=style&index=0&id=503bef9b&lang=less&scoped=true&","dependencies":[{"path":"D:\\培训\\提交项目\\my-project\\src\\views\\mainViews\\My.vue","mtime":1594986973784},{"path":"D:\\培训\\提交项目\\my-project\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\培训\\提交项目\\my-project\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\培训\\提交项目\\my-project\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\培训\\提交项目\\my-project\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\培训\\提交项目\\my-project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\培训\\提交项目\\my-project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoubmF2ewogIHdpZHRoOiAxMDAlOwogIHBvc2l0aW9uOiBmaXhlZDsKICB0b3A6MHB4Owp9Ci5teXsKICB3aWR0aDogMTAwJTsKICBiYWNrZ3JvdW5kOiAjZGRkOwogIGhlaWdodDogNjE3cHg7CiAgLndoaXRlewogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDUwcHg7CiAgfQogIC50b3B3cm9wewogICAgd2lkdGg6IDEwMCU7CiAgICBjb2xvcjp3aGl0ZTsKICAgIC5iYWNrewogICAgICBoZWlnaHQ6IDIwMHB4OwogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgIG1hcmdpbjowIDVweCAwIDVweDsKICAgICAgaW1newogICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgfQogICAgICAudXNlcmljb257CiAgICAgICAgd2lkdGg6IDgwcHg7CiAgICAgICAgaGVpZ2h0OiA4MHB4OwogICAgICAgIGJhY2tncm91bmQ6ICNmZmY7CiAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgIHRvcDogNTAlOwogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsKICAgICAgICBsZWZ0OjclOwogICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgIGltZ3sKICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgaGVpZ2h0OiA2MCU7CiAgICAgICAgfQogICAgICB9CiAgICAgIC5jb250ZW50ewogICAgICAgIHdpZHRoOiA2MCU7CiAgICAgICAgaGVpZ2h0OiAxMDBweDsKICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgdG9wOiA1MCU7CiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpOwogICAgICAgIGxlZnQ6MzMlOwogICAgICAgIC50b3B7CiAgICAgICAgICBwYWRkaW5nOiAxMHB4IDAgMCAxMHB4OwogICAgICAgICAgZm9udC1zaXplOiAyMHB4OwogICAgICAgICAgLmVkaXR7CiAgICAgICAgICAgIHBhZGRpbmctbGVmdDogMTBweDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLmJvdHRvbXsKICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgIGJvdHRvbTowOwogICAgICAgICAgcGFkZGluZy1sZWZ0OiAxMHB4CiAgICAgICAgfQogICAgICB9CiAgICAgIC5jaGFuZ2ViYWNrewogICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICB0b3A6IDUlOwogICAgICAgIHJpZ2h0OjUlOwogICAgICB9CiAgICB9CiAgfQogIC5saXN0ewogICAgd2lkdGg6IDk3JTsKICAgIG1hcmdpbjoxMHB4IGF1dG87IAogIH0KfQoKLmlucHV0bmFtZXsKICB3aWR0aDogNzAlOwogIGhlaWdodDogMTUwcHg7CiAgZm9udC1zaXplOjE2cHg7CiAgcHsKICAgIHBhZGRpbmc6MTBweDsgCiAgfSAKICBpbnB1dHsKICAgIG1hcmdpbjogMjBweCAwIDEwcHggMjBweDsKICAgIHdpZHRoOiA4MCU7CiAgICBoZWlnaHQ6IDMwcHg7CiAgICBib3JkZXI6MDsKICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjY2NjOyAKICB9CiAgLmJ0bnsKICAgIHdpZHRoOiA1NCU7CiAgICBtYXJnaW46IDAgYXV0bzsKICAgIGJ1dHRvbnsKICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4OwogICAgfQogIH0KfQo="},{"version":3,"sources":["My.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"My.vue","sourceRoot":"src/views/mainViews","sourcesContent":["<template>\r\n  <div class=\"my\">\r\n  \t<!-- 显示nav -->\r\n    <div>\r\n      <van-nav-bar title=\"我的\" class=\"nav\" @click-left=\"goMenu\" right-text=\"设置\" @click-right=\"gopage('SecurityCenter')\">\r\n      \t<template #left>\r\n\t\t      <van-icon name=\"home-o\" size=\"24\" />\r\n\t\t    </template>\r\n      </van-nav-bar>\r\n    </div>\r\n    <div class=\"white\"></div>\r\n    <!-- 显示头部 -->\r\n    <div class=\"topwrop\" v-for=\"(item,index) in userDate\">\r\n      <div class=\"back clearfix\">\r\n        <img :src=\"item.userBg\" alt=\"\">\r\n        <div class=\"changeback\">\r\n          <van-uploader :after-read=\"updatebg\">\r\n            <span>更换背景</span>\r\n          </van-uploader>          \r\n        </div>\r\n        <div class=\"usericon\">\r\n          <van-uploader :after-read=\"updateuserImg\">\r\n            <span class=\"updata\">上传</span>\r\n            <img :src=\"item.userImg\" alt=\"\">\r\n          </van-uploader> \r\n        </div>\r\n        <div class=\"content\">\r\n          <p class=\"top\">\r\n            <span>{{item.nickName}}</span>\r\n            <span class=\"edit\" @click=\"inputname(0)\"><van-icon name=\"edit\" /></span>\r\n          </p>\r\n          <p class=\"bottom\" v-if=\"item.desc == ''\">\r\n            <span>这个人很懒~~啥都没有写</span>\r\n            <span class=\"edit\" @click=\"inputname(1)\"><van-icon name=\"edit\" /></span>\r\n          </p>\r\n          <p class=\"bottom\" v-if=\"item.desc\">\r\n            <span>{{item.desc}}</span>\r\n            <span class=\"edit\" @click=\"inputname(1)\"><van-icon name=\"edit\" /></span>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 显示操作列表 -->\r\n    <div class=\"list\">\r\n      <van-cell v-for=\"(item,index) in listItem\" :key=\"index\" @click=\"gopage(item.path)\" :title=\"item.title\" is-link />\r\n    </div>\r\n\r\n    <!-- 弹出填写姓名、昵称 -->\r\n    <van-popup v-model=\"show\" class=\"inputname\">\r\n      <p>{{title}}</p>\r\n      <input type=\"text\" v-model=\"value\" :placeholder=\"title\">\r\n      <div class=\"btn\">\r\n        <van-button type=\"info\" plain @click=\"sbumit\">提交</van-button>\r\n        <van-button type=\"info\" plain @click=\"cancel\">取消</van-button>\r\n      </div>\r\n      \r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { Toast } from 'vant';\r\n\r\nexport default {\r\n  name: 'My',\r\n  mounted(){\r\n    // 获取个人信息\r\n    this.getUserData();\r\n  },\r\n  data(){\r\n    return{\r\n      // 列表数据\r\n      listItem:[\r\n        {\r\n          title:\"账户信息\",\r\n          icon:\"arrow\",\r\n          path:\"MyAccount\",\r\n        },\r\n        {\r\n          title:\"地址管理\",\r\n          icon:\"arrow\",\r\n          path:\"MyAddress\",\r\n        },\r\n        {\r\n          title:\"我的收藏\",\r\n          icon:\"arrow\",\r\n          path:\"MyCollection\",\r\n        },\r\n        {\r\n          title:\"安全中心\",\r\n          icon:\"arrow\",\r\n          path:\"SecurityCenter\"\r\n        },\r\n      ],\r\n      // 我的数据\r\n      userDate:[],\r\n      // 展示弹出谈些姓名个性签名\r\n      show:false,\r\n      // 判断弹框数据\r\n      falge:0,\r\n      // 弹窗文字\r\n      title:\"请输入昵称\",\r\n      // 获取输入框文字\r\n      value:\"\"\r\n    }\r\n  },\r\n  methods:{\r\n  \t// 回到菜单\r\n  \tgoMenu(){\r\n  \t\tthis.$router.push({name:\"Menu\"});\r\n  \t},\r\n    // 请求数据\r\n    getUserData(){\r\n      // 获取本地数据\r\n      let tokenString = localStorage.getItem(\"__Tk\");\r\n\r\n      //开启加载提示\r\n      Toast.loading({\r\n          message: \"加载中...\",\r\n          forbidClick: true,\r\n          //延迟自动关闭加载提示，如果该值为0，则不会自动关闭\r\n          duration: 0\r\n      });\r\n\r\n      this.axios({\r\n        method:\"get\",\r\n        url:\"/findMy\",\r\n        params:{\r\n          appkey:this.appkey,\r\n          tokenString,\r\n        }\r\n      }).then(result => {\r\n        Toast.clear();\r\n        this.userDate = result.data.result;\r\n        if (result.data.code == 700) {\r\n          this.$router.push({name:\"Login\"});\r\n        }\r\n      }).catch(err => {\r\n        Toast.clear();\r\n        \r\n      })\r\n    },\r\n    // 输入修改姓名/签名\r\n    inputname(val){\r\n      if (val) {\r\n        this.title = \"请输入签名\";\r\n        this.show = true;\r\n        this.falge = 1;\r\n        return;\r\n      }\r\n      this.falge = 0;\r\n      this.title = \"请输入昵称\";\r\n      this.show = true;\r\n    },\r\n\r\n    // 取消\r\n    cancel(){\r\n      this.show = false;\r\n    },\r\n\r\n    // 提交\r\n    sbumit(){\r\n      if (this.falge) {\r\n        this.changedesc();\r\n        return;\r\n      }\r\n      this.changeUsername();\r\n    },\r\n\r\n    // 修改昵称\r\n    changeUsername(){\r\n      // 获取本地数据\r\n      let tokenString = localStorage.getItem(\"__Tk\");\r\n\r\n      if (tokenString == undefined) {\r\n        this.$router.push({name:\"Login\"});\r\n      }\r\n      //开启加载提示\r\n      Toast.loading({\r\n          message: \"加载中...\",\r\n          forbidClick: true,\r\n          //延迟自动关闭加载提示，如果该值为0，则不会自动关闭\r\n          duration: 0\r\n      });\r\n\r\n      this.axios({\r\n        method:\"post\",\r\n        url:\"/updateNickName\",\r\n        data:{\r\n          appkey:this.appkey,\r\n          tokenString,\r\n          nickName:this.value,\r\n        }\r\n      }).then(result =>{\r\n        Toast.clear();\r\n        Toast(result.data.msg);\r\n        this.getUserData();\r\n      }).catch(err =>{\r\n        Toast.clear();\r\n        \r\n      })\r\n    },\r\n\r\n    // 更改签名\r\n    changedesc(){\r\n      // 获取本地数据\r\n      let tokenString = localStorage.getItem(\"__Tk\");\r\n\r\n      if (tokenString == undefined) {\r\n        this.$router.push({name:\"Login\"});\r\n      }\r\n      //开启加载提示\r\n      Toast.loading({\r\n          message: \"加载中...\",\r\n          forbidClick: true,\r\n          //延迟自动关闭加载提示，如果该值为0，则不会自动关闭\r\n          duration: 0\r\n      });\r\n\r\n      this.axios({\r\n        method:\"post\",\r\n        url:\"/updateDesc\",\r\n        data:{\r\n          appkey:this.appkey,\r\n          tokenString,\r\n          desc:this.value,\r\n        }\r\n      }).then(result =>{\r\n        Toast.clear();\r\n        Toast(result.data.msg);\r\n        this.getUserData();\r\n      }).catch(err =>{\r\n        Toast.clear();\r\n        \r\n      })\r\n    },\r\n\r\n    // 上传图片\r\n    updatebg(file) {\r\n      // 此时可以自行将文件上传至服务器\r\n      let type = file.file.type.substr(6,4);\r\n      let base = file.content;\r\n      base = base.replace(/^data:image\\/[A-Za-z]+;base64,/,\"\");\r\n      // 获取本地数据\r\n      let tokenString = localStorage.getItem(\"__Tk\");\r\n\r\n      if (tokenString == undefined) {\r\n        this.$router.push({name:\"Login\"});\r\n      }\r\n      //开启加载提示\r\n      Toast.loading({\r\n          message: \"加载中...\",\r\n          forbidClick: true,\r\n          //延迟自动关闭加载提示，如果该值为0，则不会自动关闭\r\n          duration: 0\r\n      });\r\n\r\n      this.axios({\r\n        method:\"post\",\r\n        url:\"/updateUserBg\",\r\n        data:{\r\n          appkey:this.appkey,\r\n          tokenString,\r\n          imgType:type,\r\n          serverBase64Img:base\r\n        }\r\n      }).then(result =>{\r\n        Toast.clear();\r\n        Toast(result.data.msg);\r\n        this.getUserData();\r\n      }).catch(err =>{\r\n        Toast.clear();\r\n        \r\n      })\r\n    },\r\n\r\n    // 修改头像\r\n    updateuserImg(file){\r\n      // 此时可以自行将文件上传至服务器\r\n      let type = file.file.type.substr(6,3);\r\n\r\n      let base = file.content;\r\n      base = base.replace(/^data:image\\/[A-Za-z]+;base64,/,\"\");\r\n\r\n      // 获取本地数据\r\n      let tokenString = localStorage.getItem(\"__Tk\");\r\n\r\n      if (tokenString == undefined) {\r\n        this.$router.push({name:\"Login\"});\r\n      }\r\n      //开启加载提示\r\n      Toast.loading({\r\n          message: \"加载中...\",\r\n          forbidClick: true,\r\n          //延迟自动关闭加载提示，如果该值为0，则不会自动关闭\r\n          duration: 0\r\n      });\r\n\r\n      this.axios({\r\n        method:\"post\",\r\n        url:\"/updateAvatar\",\r\n        data:{\r\n          appkey:this.appkey,\r\n          tokenString,\r\n          imgType:type,\r\n          serverBase64Img:base\r\n        }\r\n      }).then(result =>{\r\n        Toast.clear();\r\n        Toast(result.data.msg);\r\n        this.getUserData();\r\n      }).catch(err =>{\r\n        Toast.clear();\r\n        \r\n      })\r\n    },\r\n    // 去相应地址\r\n    gopage(path){\r\n      this.$router.push({name:path});\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .nav{\r\n    width: 100%;\r\n    position: fixed;\r\n    top:0px;\r\n  }\r\n  .my{\r\n    width: 100%;\r\n    background: #ddd;\r\n    height: 617px;\r\n    .white{\r\n      width: 100%;\r\n      height: 50px;\r\n    }\r\n    .topwrop{\r\n      width: 100%;\r\n      color:white;\r\n      .back{\r\n        height: 200px;\r\n        position: relative;\r\n        margin:0 5px 0 5px;\r\n        img{\r\n          width: 100%;\r\n          height: 100%;\r\n        }\r\n        .usericon{\r\n          width: 80px;\r\n          height: 80px;\r\n          background: #fff;\r\n          position: absolute;\r\n          top: 50%;\r\n          transform: translateY(-50%);\r\n          left:7%;\r\n          border-radius: 50%;\r\n          overflow: hidden;\r\n          img{\r\n            width: 100%;\r\n            height: 60%;\r\n          }\r\n        }\r\n        .content{\r\n          width: 60%;\r\n          height: 100px;\r\n          position: absolute;\r\n          top: 50%;\r\n          transform: translateY(-50%);\r\n          left:33%;\r\n          .top{\r\n            padding: 10px 0 0 10px;\r\n            font-size: 20px;\r\n            .edit{\r\n              padding-left: 10px;\r\n            }\r\n          }\r\n          .bottom{\r\n            position: absolute;\r\n            bottom:0;\r\n            padding-left: 10px\r\n          }\r\n        }\r\n        .changeback{\r\n          position: absolute;\r\n          top: 5%;\r\n          right:5%;\r\n        }\r\n      }\r\n    }\r\n    .list{\r\n      width: 97%;\r\n      margin:10px auto; \r\n    }\r\n  }\r\n\r\n  .inputname{\r\n    width: 70%;\r\n    height: 150px;\r\n    font-size:16px;\r\n    p{\r\n      padding:10px; \r\n    } \r\n    input{\r\n      margin: 20px 0 10px 20px;\r\n      width: 80%;\r\n      height: 30px;\r\n      border:0;\r\n      border-bottom: 2px solid #ccc; \r\n    }\r\n    .btn{\r\n      width: 54%;\r\n      margin: 0 auto;\r\n      button{\r\n        margin-right: 10px;\r\n      }\r\n    }\r\n  }\r\n</style>"]}]}