{"remainingRequest":"D:\\培训\\2020-06-30笔记\\my-project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\培训\\2020-06-30笔记\\my-project\\src\\views\\PlaceOrder.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\培训\\2020-06-30笔记\\my-project\\src\\views\\PlaceOrder.vue","mtime":1594372830935},{"path":"D:\\培训\\2020-06-30笔记\\my-project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\培训\\2020-06-30笔记\\my-project\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\培训\\2020-06-30笔记\\my-project\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\培训\\2020-06-30笔记\\my-project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\培训\\2020-06-30笔记\\my-project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBUb2FzdCB9IGZyb20gJ3ZhbnQnOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdQbGFjZU9yZGVyJywNCiAgbW91bnRlZCgpew0KICAgIC8vIOiOt+W+l+S4iuS4gOS4queVjOmdoueahOWAvOWSjOiOt+WPluWVhuWTgeaVsOaNrg0KICAgIHRoaXMuZ2V0U2lkc0FuZEdvb2RzKCk7DQogICAgLy8g6I635Y+W5Zyw5Z2A5pWw5o2uDQogICAgdGhpcy5zZWxlY3RBZGRyZXNzKCk7DQogIH0sDQogIGRhdGEoKXsNCiAgCXJldHVybnsNCiAgICAgIC8vIOWxleekuumAieaLqeWcsOWdgA0KICAgICAgc2hvdzpmYWxzZSwNCiAgICAgIC8vIOWcsOWdgOWIl+ihqOi9pg0KICAgICAgY2hvc2VuQWRkcmVzc0lkOiAnMScsDQogICAgICBsaXN0OiBbXSwNCg0KICAgICAgLy8g5ZWG5ZOB5pWw5o2uDQogICAgICBjb21tb2RpdHlEYXRhOltdLA0KICAgICAgLy8g5L+d5a2Y5ZWG5ZOB5Lu35qC85ZKM5pWw6YePDQogICAgICBudW1wcmljZTpbXSwNCiAgICAgIC8vIOW9k+WJjeWcsOWdgOS/oeaBrw0KICAgICAgY3VycmVudDp7fSwNCiAgCX0NCiAgfSwNCiAgbWV0aG9kczp7DQogIAkvLyDlm57liLDkuIrkuIDpobUNCiAgICBnb2JhY2soKXsNCiAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7DQogICAgfSwNCiAgICAvLyDmlrDlop7lnLDlnYANCiAgICBvbkFkZCgpIHsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiJBZGRyZXNzIn0pOw0KICAgIH0sDQogICAgLy8g57yW6L6R5Zyw5Z2ADQogICAgb25FZGl0KGl0ZW0sIGluZGV4KSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZToiQWRkcmVzcyIscXVlcnk6e2FpZDppdGVtLmFpZH19KTsNCiAgICB9LA0KICAgIC8vIOmAieaLqeWcsOWdgA0KICAgIGNoYW5nZUFkZHJlc3MoKXsNCiAgICAgIHRoaXMuc2hvdyA9IHRydWU7DQogICAgfSwNCiAgICAvLyDojrflj5bkuIrkuIDkuKrnlYzpnaLnmoTmlbDmja7lkozlpITnkIbllYblk4HmlbDmja4NCiAgICBnZXRTaWRzQW5kR29vZHMoKXsNCiAgICAgIC8vIOiOt+WPluacrOWcsOaVsOaNrg0KICAgICAgbGV0IHRva2VuU3RyaW5nID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIl9fVGsiKTsNCiAgICAgIC8v5Yik5pat5piv5ZCm55m75b2VDQogICAgICBpZiAodG9rZW5TdHJpbmcgPT0gdW5kZWZpbmVkKSB7DQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiJMb2dpbiJ9KTsNCiAgICAgIH0NCiAgICAgIC8vIOiOt+WPluiuouWNleWPtw0KICAgICAgbGV0IHB1dHNpZHMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgicHV0c2lkcyIpOw0KICAgICAgDQogICAgICAvL+W8gOWQr+WKoOi9veaPkOekug0KICAgICAgVG9hc3QubG9hZGluZyh7DQogICAgICAgICAgbWVzc2FnZTogIuWKoOi9veS4rS4uLiIsDQogICAgICAgICAgZm9yYmlkQ2xpY2s6IHRydWUsDQogICAgICAgICAgLy/lu7bov5/oh6rliqjlhbPpl63liqDovb3mj5DnpLrvvIzlpoLmnpzor6XlgLzkuLow77yM5YiZ5LiN5Lya6Ieq5Yqo5YWz6ZetDQogICAgICAgICAgZHVyYXRpb246IDANCiAgICAgIH0pOw0KDQogICAgICAvLyDov5vooYzllYblk4HmlbDmja7nmoTojrflj5YNCiAgICAgIHRoaXMuYXhpb3Moew0KICAgICAgICBtZXRob2Q6ImdldCIsDQogICAgICAgIHVybDoiaHR0cDovL3d3dy5rYW5nbGl1eW9uZy5jb206MTAwMDIvY29tbWl0U2hvcGNhcnQiLA0KICAgICAgICBwYXJhbXM6ew0KICAgICAgICAgIGFwcGtleTp0aGlzLmFwcGtleSwNCiAgICAgICAgICB0b2tlblN0cmluZywNCiAgICAgICAgICBzaWRzOnB1dHNpZHMNCiAgICAgICAgfQ0KICAgICAgfSkudGhlbihyZXN1bHQgPT57DQogICAgICAgIFRvYXN0LmNsZWFyKCk7DQogICAgICAgIHRoaXMuY29tbW9kaXR5RGF0YSA9IHJlc3VsdC5kYXRhLnJlc3VsdDsNCiAgICAgICAgLy8g6K6h566X5ZWG5ZOB55qE5oC75Lu35qC8DQogICAgICAgIHRoaXMuc3VtdG90YWwoKTsNCiAgICAgIH0pLmNhdGNoKGVyciA9PnsNCiAgICAgICAgVG9hc3QuY2xlYXIoKTsNCiAgICAgICAgDQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g6K6h566X5ZWG5ZOB5Lu35qC8DQogICAgc3VtdG90YWwoKXsNCiAgICAgIGxldCBzdW0gPSAwOw0KICAgICAgbGV0IHByaWNlID0gMDsNCg0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbW1vZGl0eURhdGEubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgc3VtICs9IHRoaXMuY29tbW9kaXR5RGF0YVtpXS5jb3VudDsNCg0KICAgICAgICBwcmljZSArPSB0aGlzLmNvbW1vZGl0eURhdGFbaV0uY291bnQgKiB0aGlzLmNvbW1vZGl0eURhdGFbaV0ucHJpY2U7DQogICAgICB9DQoNCiAgICAgIHRoaXMubnVtcHJpY2UucHVzaChzdW0pOw0KICAgICAgdGhpcy5udW1wcmljZS5wdXNoKHByaWNlKTsNCiAgICB9LA0KDQogICAgLy8g5p+l6K+i5Zyw5Z2A5pWw5o2uDQogICAgc2VsZWN0QWRkcmVzcygpew0KICAgICAgLy8g6I635Y+W5pys5Zyw5pWw5o2uDQogICAgICBsZXQgdG9rZW5TdHJpbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiX19UayIpOw0KDQogICAgICAvL+W8gOWQr+WKoOi9veaPkOekug0KICAgICAgVG9hc3QubG9hZGluZyh7DQogICAgICAgICAgbWVzc2FnZTogIuWKoOi9veS4rS4uLiIsDQogICAgICAgICAgZm9yYmlkQ2xpY2s6IHRydWUsDQogICAgICAgICAgLy/lu7bov5/oh6rliqjlhbPpl63liqDovb3mj5DnpLrvvIzlpoLmnpzor6XlgLzkuLow77yM5YiZ5LiN5Lya6Ieq5Yqo5YWz6ZetDQogICAgICAgICAgZHVyYXRpb246IDANCiAgICAgIH0pOw0KDQogICAgICAvLyDlvIDlp4vor7fmsYINCiAgICAgIHRoaXMuYXhpb3Moew0KICAgICAgICBtZXRob2Q6ImdldCIsDQogICAgICAgIHVybDoiaHR0cDovL3d3dy5rYW5nbGl1eW9uZy5jb206MTAwMDIvZmluZEFkZHJlc3MiLA0KICAgICAgICBwYXJhbXM6ew0KICAgICAgICAgIGFwcGtleTp0aGlzLmFwcGtleSwNCiAgICAgICAgICB0b2tlblN0cmluZw0KICAgICAgICB9DQogICAgICB9KS50aGVuKHJlc3VsdCA9PnsNCiAgICAgICAgVG9hc3QuY2xlYXIoKTsNCiAgICAgICAgaWYgKHJlc3VsdC5kYXRhLmNvZGUgPT0gMjAwMDApIHsNCiAgICAgICAgICByZXN1bHQuZGF0YS5yZXN1bHQuZm9yRWFjaCh2ID0+IHsNCiAgICAgICAgICAgIGxldCBjdXJyZW50QWRkcmVzcyA9IHsNCiAgICAgICAgICAgICAgaWQ6di5pZCwNCiAgICAgICAgICAgICAgdGVsOnYudGVsLA0KICAgICAgICAgICAgICBuYW1lOnYubmFtZSwNCiAgICAgICAgICAgICAgYWRkcmVzczp2LnByb3ZpbmNlICsgdi5jb3VudHkgKyB2LmNpdHkgKyB2LmFkZHJlc3NEZXRhaWwsDQogICAgICAgICAgICAgIGlzRGVmYXVsdDpCb29sZWFuKHYuaXNEZWZhdWx0KSwNCiAgICAgICAgICAgICAgYWlkOnYuYWlkDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmxpc3QucHVzaChjdXJyZW50QWRkcmVzcyk7DQogICAgICAgICAgfSkNCiAgICAgICAgICAvLyDliKTmlq3mmK/lkKbmmK/pu5jorqTlgLwNCiAgICAgICAgICBsZXQgaW5kZXggPSAwOyANCiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGlzdC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgaWYgKHRoaXMubGlzdFtpXS5pc0RlZmF1bHQpIHsNCiAgICAgICAgICAgICAgaW5kZXggPSBpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLmNob3NlbkFkZHJlc3NJZCA9IHRoaXMubGlzdFtpbmRleF0uaWQ7DQogICAgICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5saXN0W2luZGV4XTsNCiAgICAgICAgfQ0KICAgICAgfSkuY2F0Y2goZXJyID0+ew0KICAgICAgICBUb2FzdC5jbGVhcigpOw0KICAgICAgICANCiAgICAgIH0pDQoNCiAgICB9LA0KICAgIC8vIOWIh+aNouWcsOWdgA0KICAgIHN3aXRjaEFkZHJlc3MoaXRlbSxpbmRleCl7DQogICAgICB0aGlzLmN1cnJlbnQgPSBpdGVtOw0KICAgICAgdGhpcy5zaG93ID0gZmFsc2U7DQogICAgfSwNCiAgICAvLyDmj5DkuqTlnLDlnYANCiAgICBzYnVtaXRPcmRlcigpew0KICAgICAgLy8g6I635Y+W5pys5Zyw5pWw5o2uDQogICAgICBsZXQgdG9rZW5TdHJpbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiX19UayIpOw0KICAgICAgLy8g6I635Y+W6K6i5Y2V5Y+3DQogICAgICBsZXQgcHV0c2lkcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJwdXRzaWRzIik7DQoNCiAgICAgIC8v5byA5ZCv5Yqg6L295o+Q56S6DQogICAgICBUb2FzdC5sb2FkaW5nKHsNCiAgICAgICAgICBtZXNzYWdlOiAi5Yqg6L295LitLi4uIiwNCiAgICAgICAgICBmb3JiaWRDbGljazogdHJ1ZSwNCiAgICAgICAgICAvL+W7tui/n+iHquWKqOWFs+mXreWKoOi9veaPkOekuu+8jOWmguaenOivpeWAvOS4ujDvvIzliJnkuI3kvJroh6rliqjlhbPpl60NCiAgICAgICAgICBkdXJhdGlvbjogMA0KICAgICAgfSk7DQoNCiAgICAgIHRoaXMuYXhpb3Moew0KICAgICAgICBtZXRob2Q6IlBPU1QiLA0KICAgICAgICB1cmw6Imh0dHA6Ly93d3cua2FuZ2xpdXlvbmcuY29tOjEwMDAyL3BheSIsDQogICAgICAgIGRhdGE6ew0KICAgICAgICAgIGFwcGtleTp0aGlzLmFwcGtleSwNCiAgICAgICAgICB0b2tlblN0cmluZywNCiAgICAgICAgICBzaWRzOnB1dHNpZHMsDQogICAgICAgICAgcGhvbmU6dGhpcy5jdXJyZW50LnRlbCwNCiAgICAgICAgICBhZGRyZXNzOnRoaXMuY3VycmVudC5hZGRyZXNzLA0KICAgICAgICAgIHJlY2VpdmVyOnRoaXMuY3VycmVudC5uYW1lDQogICAgICAgIH0NCiAgICAgIH0pLnRoZW4ocmVzdWx0ID0+IHsNCiAgICAgICAgVG9hc3QuY2xlYXIoKTsNCiAgICAgICAgaWYgKHJlc3VsdC5kYXRhLmNvZGUgPT0gNjAwMDApIHsNCiAgICAgICAgICBUb2FzdChyZXN1bHQuZGF0YS5tc2cpOw0KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiJPcmRlciJ9KQ0KICAgICAgICB9DQogICAgICB9KS5jYXRjaChlcnIgPT4gew0KICAgICAgICBUb2FzdC5jbGVhcigpOw0KICAgICAgICANCiAgICAgIH0pDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["PlaceOrder.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"PlaceOrder.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"placeOrder\">\r\n    <!-- 显示nav -->\r\n    <div>\r\n      <van-nav-bar title=\"确认支付\" left-text=\"返回\"  class=\"nav\" left-arrow @click-left=\"goback\">\r\n      </van-nav-bar>\r\n    </div>\r\n    <div class=\"whit\"></div>\r\n    <div class=\"address\">\r\n      <span @click=\"changeAddress\">请选择收货地址</span>\r\n      <!-- 显示地址 -->\r\n      <div class=\"addressitem\">\r\n        <p class=\"title\">当前地址：</p>\r\n        <p>姓名：{{current.name}}</p>\r\n        <p>电话：{{current.tel}}</p>\r\n        <p>地址：{{current.address}}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 提交订单 -->\r\n    <van-submit-bar :price=\"this.numprice[1]*100\" button-text=\"立即支付\" @submit=\"sbumitOrder\">\r\n    </van-submit-bar>\r\n\r\n    <!-- 显示商品 -->\r\n    <div class=\"showgoods\">\r\n      <van-card\r\n        v-for=\"(item,index) in commodityData\"\r\n        :num=\"item.count\"\r\n        :price=\"item.price\"\r\n        :desc=\"item.rule\"\r\n        :title=\"item.name\"\r\n        :thumb=\"item.small_img\"\r\n      />\r\n    </div>\r\n\r\n    <!-- 显示总价 -->\r\n    <div class=\"total clearfix\">\r\n      <p class=\"fr\">\r\n        <span>共计<span class=\"num\">{{numprice[0]}}</span>件商品，共计</span>\r\n        <span class=\"price\">￥{{numprice[1]}}</span>\r\n      </p>\r\n    </div>\r\n\r\n        <!-- 提交地址 -->\r\n    <van-action-sheet v-model=\"show\" title=\"请选择地址\">\r\n      <div class=\"content-show\">\r\n        <van-address-list\r\n          v-model=\"chosenAddressId\"\r\n          :list=\"list\"\r\n          default-tag-text=\"默认\"\r\n          @add=\"onAdd\"\r\n          @edit=\"onEdit\"\r\n          @select=\"switchAddress\"\r\n        />\r\n      </div>\r\n    </van-action-sheet>\r\n    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Toast } from 'vant';\r\n\r\nexport default {\r\n  name: 'PlaceOrder',\r\n  mounted(){\r\n    // 获得上一个界面的值和获取商品数据\r\n    this.getSidsAndGoods();\r\n    // 获取地址数据\r\n    this.selectAddress();\r\n  },\r\n  data(){\r\n  \treturn{\r\n      // 展示选择地址\r\n      show:false,\r\n      // 地址列表车\r\n      chosenAddressId: '1',\r\n      list: [],\r\n\r\n      // 商品数据\r\n      commodityData:[],\r\n      // 保存商品价格和数量\r\n      numprice:[],\r\n      // 当前地址信息\r\n      current:{},\r\n  \t}\r\n  },\r\n  methods:{\r\n  \t// 回到上一页\r\n    goback(){\r\n      this.$router.go(-1);\r\n    },\r\n    // 新增地址\r\n    onAdd() {\r\n      this.$router.push({name:\"Address\"});\r\n    },\r\n    // 编辑地址\r\n    onEdit(item, index) {\r\n      this.$router.push({name:\"Address\",query:{aid:item.aid}});\r\n    },\r\n    // 选择地址\r\n    changeAddress(){\r\n      this.show = true;\r\n    },\r\n    // 获取上一个界面的数据和处理商品数据\r\n    getSidsAndGoods(){\r\n      // 获取本地数据\r\n      let tokenString = localStorage.getItem(\"__Tk\");\r\n      //判断是否登录\r\n      if (tokenString == undefined) {\r\n        this.$router.push({name:\"Login\"});\r\n      }\r\n      // 获取订单号\r\n      let putsids = localStorage.getItem(\"putsids\");\r\n      \r\n      //开启加载提示\r\n      Toast.loading({\r\n          message: \"加载中...\",\r\n          forbidClick: true,\r\n          //延迟自动关闭加载提示，如果该值为0，则不会自动关闭\r\n          duration: 0\r\n      });\r\n\r\n      // 进行商品数据的获取\r\n      this.axios({\r\n        method:\"get\",\r\n        url:\"http://www.kangliuyong.com:10002/commitShopcart\",\r\n        params:{\r\n          appkey:this.appkey,\r\n          tokenString,\r\n          sids:putsids\r\n        }\r\n      }).then(result =>{\r\n        Toast.clear();\r\n        this.commodityData = result.data.result;\r\n        // 计算商品的总价格\r\n        this.sumtotal();\r\n      }).catch(err =>{\r\n        Toast.clear();\r\n        \r\n      })\r\n    },\r\n    // 计算商品价格\r\n    sumtotal(){\r\n      let sum = 0;\r\n      let price = 0;\r\n\r\n      for (var i = 0; i < this.commodityData.length; i++) {\r\n        sum += this.commodityData[i].count;\r\n\r\n        price += this.commodityData[i].count * this.commodityData[i].price;\r\n      }\r\n\r\n      this.numprice.push(sum);\r\n      this.numprice.push(price);\r\n    },\r\n\r\n    // 查询地址数据\r\n    selectAddress(){\r\n      // 获取本地数据\r\n      let tokenString = localStorage.getItem(\"__Tk\");\r\n\r\n      //开启加载提示\r\n      Toast.loading({\r\n          message: \"加载中...\",\r\n          forbidClick: true,\r\n          //延迟自动关闭加载提示，如果该值为0，则不会自动关闭\r\n          duration: 0\r\n      });\r\n\r\n      // 开始请求\r\n      this.axios({\r\n        method:\"get\",\r\n        url:\"http://www.kangliuyong.com:10002/findAddress\",\r\n        params:{\r\n          appkey:this.appkey,\r\n          tokenString\r\n        }\r\n      }).then(result =>{\r\n        Toast.clear();\r\n        if (result.data.code == 20000) {\r\n          result.data.result.forEach(v => {\r\n            let currentAddress = {\r\n              id:v.id,\r\n              tel:v.tel,\r\n              name:v.name,\r\n              address:v.province + v.county + v.city + v.addressDetail,\r\n              isDefault:Boolean(v.isDefault),\r\n              aid:v.aid\r\n            }\r\n            this.list.push(currentAddress);\r\n          })\r\n          // 判断是否是默认值\r\n          let index = 0; \r\n          for (let i = 0; i < this.list.length; i++) {\r\n            if (this.list[i].isDefault) {\r\n              index = i;\r\n            }\r\n          }\r\n          this.chosenAddressId = this.list[index].id;\r\n          this.current = this.list[index];\r\n        }\r\n      }).catch(err =>{\r\n        Toast.clear();\r\n        \r\n      })\r\n\r\n    },\r\n    // 切换地址\r\n    switchAddress(item,index){\r\n      this.current = item;\r\n      this.show = false;\r\n    },\r\n    // 提交地址\r\n    sbumitOrder(){\r\n      // 获取本地数据\r\n      let tokenString = localStorage.getItem(\"__Tk\");\r\n      // 获取订单号\r\n      let putsids = localStorage.getItem(\"putsids\");\r\n\r\n      //开启加载提示\r\n      Toast.loading({\r\n          message: \"加载中...\",\r\n          forbidClick: true,\r\n          //延迟自动关闭加载提示，如果该值为0，则不会自动关闭\r\n          duration: 0\r\n      });\r\n\r\n      this.axios({\r\n        method:\"POST\",\r\n        url:\"http://www.kangliuyong.com:10002/pay\",\r\n        data:{\r\n          appkey:this.appkey,\r\n          tokenString,\r\n          sids:putsids,\r\n          phone:this.current.tel,\r\n          address:this.current.address,\r\n          receiver:this.current.name\r\n        }\r\n      }).then(result => {\r\n        Toast.clear();\r\n        if (result.data.code == 60000) {\r\n          Toast(result.data.msg);\r\n          this.$router.push({name:\"Order\"})\r\n        }\r\n      }).catch(err => {\r\n        Toast.clear();\r\n        \r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .placeOrder{\r\n    width: 100%;\r\n    height: 667px;\r\n    background: #ddd;\r\n    .whit{\r\n      width: 100%;\r\n      height: 50px;\r\n    }\r\n    .address{\r\n      margin-top: 10px;\r\n      margin-bottom:10px;\r\n      padding:10px 0 10px 10px; \r\n      background: #fff; \r\n      font-size: 18px;\r\n      span{\r\n        display: inline-block;\r\n        width: 100%;\r\n        padding-bottom:10px; \r\n      }\r\n\r\n      .addressitem{\r\n        font-size: 14px;\r\n        border-top: 1px solid #000;\r\n        .title{\r\n          padding-left: 0px;\r\n          padding-bottom: 10px;\r\n          font-size: 16px;\r\n        }\r\n        p{\r\n          padding-left: 15px;\r\n        }\r\n      }\r\n    }\r\n\r\n    .showgoods{\r\n      width: 100%;\r\n      border-radius: 10px;\r\n    }\r\n\r\n    .total{\r\n      width: 100%;\r\n      margin-top: 5px;\r\n      background: #fff;\r\n      color: #666;\r\n      margin-bottom: 50px;\r\n      .num{\r\n        font-size: 16px;\r\n      }\r\n      .price{\r\n        font-size: 20px;\r\n        font-weight: 100;\r\n        padding-right: 15px;\r\n        color: #000;\r\n      }\r\n    }\r\n  }\r\n  .nav{\r\n      width: 100%;\r\n      position: fixed;\r\n      top: 0;\r\n      z-index: 2;\r\n  }\r\n  // 提交按钮\r\n  .van-button{\r\n    background: #FE874D;\r\n  }\r\n</style>"]}]}