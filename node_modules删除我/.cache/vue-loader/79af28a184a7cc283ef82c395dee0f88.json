{"remainingRequest":"D:\\培训\\提交项目\\my-project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\培训\\提交项目\\my-project\\src\\views\\myViews\\SecurityCenter.vue?vue&type=style&index=0&id=eaab4780&lang=less&scoped=true&","dependencies":[{"path":"D:\\培训\\提交项目\\my-project\\src\\views\\myViews\\SecurityCenter.vue","mtime":1594372830893},{"path":"D:\\培训\\提交项目\\my-project\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\培训\\提交项目\\my-project\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\培训\\提交项目\\my-project\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\培训\\提交项目\\my-project\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\培训\\提交项目\\my-project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\培训\\提交项目\\my-project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5uYXZ7CiAgd2lkdGg6IDEwMCU7CiAgcG9zaXRpb246IGZpeGVkOwogIHRvcDowcHg7Cn0KLnNlY3VyaXR5Q2VudGVyewogIHdpZHRoOjEwMCU7CiAgaGVpZ2h0OiA2NjdweDsKICBiYWNrZ3JvdW5kOiAjZGRkOwogIC53aGl0ZXsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiA0NnB4OwogIH0KICAubGlzdHsKICAgIHdpZHRoOiA5NyU7CiAgICBtYXJnaW46MTBweCBhdXRvOyAKICB9CgoudXBkYXRhcGFzc3sKICB3aWR0aDogODAlOwogIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgZm9udC1zaXplOjE2cHg7CiAgcHsKICAgIHBhZGRpbmc6MTBweDsgCiAgfSAKICBpbnB1dHsKICAgIG1hcmdpbjogMjBweCAwIDEwcHggMjBweDsKICAgIHdpZHRoOiA4MCU7CiAgICBoZWlnaHQ6IDMwcHg7CiAgICBib3JkZXI6MDsKICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjY2NjOyAKICB9CiAgLmJ0bnsKICAgIHdpZHRoOiA0OCU7CiAgICBtYXJnaW46IDAgYXV0bzsKICAgIGJ1dHRvbnsKICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4OwogICAgICBtYXJnaW4tYm90dG9tOiAxMHB4OwogICAgfQogIH0KfQp9Cg=="},{"version":3,"sources":["SecurityCenter.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SecurityCenter.vue","sourceRoot":"src/views/myViews","sourcesContent":["<template>\r\n  <div class=\"securityCenter\">\r\n    <!-- 显示nav -->\r\n    <div>\r\n      <van-nav-bar title=\"安全中心\" left-text=\"返回\" left-arrow @click-left=\"prev\" class=\"nav\"/>\r\n    </div>\r\n    <div class=\"white\"></div>\r\n    <!-- 显示操作列表 -->\r\n    <div class=\"list\">\r\n      <van-cell v-for=\"(item,index) in listItem\" :key=\"index\" @click=\"popup(index)\" :title=\"item.title\" is-link />\r\n    </div>\r\n\r\n    <!-- 修改密码弹窗 -->\r\n    <van-popup v-model=\"passwropShow\" class=\"updatapass\">\r\n      <p>修改密码</p>\r\n      <input type=\"password\" v-model=\"oldpassWord\" placeholder=\"原密码\">\r\n      <input type=\"password\" v-model=\"newpassWord\" placeholder=\"新密码(字母开头6位以上)\">\r\n      <div class=\"btn\">\r\n        <van-button type=\"info\" plain @click=\"passwrodSbumit\">提交</van-button>\r\n        <van-button type=\"info\" plain @click=\"passwrodCancel\">取消</van-button>\r\n      </div>  \r\n    </van-popup>\r\n\r\n    <!-- 找回密码 -->\r\n    <van-popup v-model=\"findPasswordShow\" class=\"updatapass\">\r\n      <p>找回密码</p>\r\n      <input type=\"tel\" v-model=\"findPasswordTel\" placeholder=\"注册时手机号\">\r\n      <input type=\"password\" v-model=\"findNewpassWord\" placeholder=\"新密码(字母开头6位以上)\">\r\n      <div class=\"btn\">\r\n        <van-button type=\"info\" plain @click=\"findPasswrodSbumit\">提交</van-button>\r\n        <van-button type=\"info\" plain @click=\"findPasswrodCancel\">取消</van-button>\r\n      </div>  \r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Toast } from 'vant';\r\nexport default {\r\n  name: 'SecurityCenter',\r\n  data(){\r\n    return{\r\n      // 列表数据\r\n      listItem:[\r\n        {\r\n          title:\"修改密码\",\r\n          icon:\"arrow\",\r\n        },\r\n        {\r\n          title:\"找回密码\",\r\n          icon:\"arrow\",\r\n        },\r\n        {\r\n          title:\"注销账号\",\r\n          icon:\"arrow\",\r\n        },\r\n        {\r\n          title:\"退出登录\",\r\n          icon:\"arrow\",\r\n        },\r\n      ],\r\n      // 修改密码\r\n      passwropShow:false,\r\n      // 原密码\r\n      oldpassWord:\"\",\r\n      // 新密码\r\n      newpassWord:\"\",\r\n      // 找回密码\r\n      findPasswordShow:false,\r\n      // 找回密码的手机号\r\n      findPasswordTel:\"\",\r\n      // 找回密码的新密码\r\n      findNewpassWord:\"\"\r\n    }\r\n  },\r\n  methods:{\r\n    // 返回上一层\r\n    prev(){\r\n      this.$router.go(-1)\r\n    },\r\n    // 判断谁是谁点击\r\n    popup(index){\r\n      if (index == 0) {\r\n        this.passwropShow = true;\r\n      }\r\n      if (index == 1) {\r\n        this.findPasswordShow = true;\r\n      }\r\n\r\n      if (index == 2) {\r\n        this.$dialog.alert({\r\n          title: 'tips',\r\n          message: '该内容为灰度测试中...',\r\n        });\r\n      }\r\n\r\n      if (index == 3) {\r\n        this.exit();\r\n      }\r\n    },\r\n\r\n    // 修改密码取消\r\n    passwrodCancel(){\r\n      this.passwropShow = false;\r\n    },\r\n\r\n    // 修改密码提交\r\n    passwrodSbumit(){\r\n      if (this.oldpassWord == \"\" || this.newpassWord == \"\") {\r\n        Toast(\"请把信息填写完整！\");\r\n        return;\r\n      }\r\n      this.passwrod();\r\n    },\r\n\r\n    // 修改密码\r\n    passwrod(){\r\n      if (!/^[a-zA-Z]\\w\\d{5,15}$/.test(this.newpassWord)) {\r\n        Toast(\"请输入正确的格式\");\r\n        return;\r\n      }\r\n      // 获取本地数据\r\n      let tokenString = localStorage.getItem(\"__Tk\");\r\n\r\n      if (tokenString == undefined) {\r\n        this.$router.push({name:\"Login\"});\r\n      }\r\n      //开启加载提示\r\n      Toast.loading({\r\n          message: \"加载中...\",\r\n          forbidClick: true,\r\n          //延迟自动关闭加载提示，如果该值为0，则不会自动关闭\r\n          duration: 0\r\n      });\r\n\r\n      this.axios({\r\n        method:\"post\",\r\n        url:\"http://www.kangliuyong.com:10002/updatePassword\",\r\n        data:{\r\n          appkey:this.appkey,\r\n          tokenString,\r\n          password:this.newpassWord,\r\n          oldPassword:this.oldpassWord\r\n        }\r\n      }).then(result => {\r\n        Toast.clear();\r\n        Toast(result.data.msg);\r\n        this.newpassWord = \"\";\r\n        this.oldpassWord = \"\";\r\n        // 清除token，方便后面验证\r\n        localStorage.setItem(\"__Tk\", \"\");\r\n        this.$router.push({name:\"Login\"});\r\n      }).catch(err => {\r\n        Toast.clear();\r\n        \r\n      })\r\n    },\r\n    // 找回密码取消\r\n    findPasswrodCancel(){\r\n      this.findPasswordShow = false;\r\n    },\r\n\r\n    // 找回密码提交\r\n    findPasswrodSbumit(){\r\n      if (this.findPasswordTel == \"\" || this.findNewpassWord == \"\") {\r\n        Toast(\"请把信息填写完整！\");\r\n        return;\r\n      }\r\n      this.findpasswrod();\r\n    },\r\n\r\n    // 找回密码\r\n    findpasswrod(){\r\n      if (!/^[a-zA-Z]\\w\\d{5,15}$/.test(this.findNewpassWord) || /^1[3|4|5|7|8][0-9]{9}$/.test(this.findPasswordTel)) {\r\n        Toast(\"请输入正确的格式\");\r\n        return;\r\n      }\r\n      // 获取本地数据\r\n      let tokenString = localStorage.getItem(\"__Tk\");\r\n\r\n      if (tokenString == undefined) {\r\n        this.$router.push({name:\"Login\"});\r\n      }\r\n      //开启加载提示\r\n      Toast.loading({\r\n          message: \"加载中...\",\r\n          forbidClick: true,\r\n          //延迟自动关闭加载提示，如果该值为0，则不会自动关闭\r\n          duration: 0\r\n      });\r\n\r\n      this.axios({\r\n        method:\"post\",\r\n        url:\"http://www.kangliuyong.com:10002/retrievePassword\",\r\n        data:{\r\n          appkey:this.appkey,\r\n          phone:this.findPasswordTel,\r\n          password:this.findNewpassWord\r\n        }\r\n      }).then(result => {\r\n        Toast.clear();\r\n        this.findPasswordTel = \"\";\r\n        this.findNewpassWord = \"\";\r\n        Toast(result.data.msg);\r\n        \r\n      }).catch(err => {\r\n        Toast.clear();\r\n        \r\n      })\r\n    },\r\n\r\n    // 退出登录\r\n    exit(){\r\n      // 获取本地数据\r\n      let tokenString = localStorage.getItem(\"__Tk\");\r\n\r\n      //开启加载提示\r\n      Toast.loading({\r\n          message: \"加载中...\",\r\n          forbidClick: true,\r\n          //延迟自动关闭加载提示，如果该值为0，则不会自动关闭\r\n          duration: 0\r\n      });\r\n\r\n      this.axios({\r\n        method:\"post\",\r\n        url:\"http://www.kangliuyong.com:10002/logout\",\r\n        params:{\r\n          appkey:this.appkey,\r\n          tokenString,\r\n        }\r\n      }).then(result => {\r\n        Toast.clear();\r\n        Toast(result.data.msg);\r\n        // 删除token\r\n        localStorage.setItem(\"__Tk\", \"\");\r\n        this.$router.push({name:\"Login\"});\r\n      }).catch(err => {\r\n        Toast.clear();\r\n        \r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .nav{\r\n    width: 100%;\r\n    position: fixed;\r\n    top:0px;\r\n  }\r\n  .securityCenter{\r\n    width:100%;\r\n    height: 667px;\r\n    background: #ddd;\r\n    .white{\r\n      width: 100%;\r\n      height: 46px;\r\n    }\r\n    .list{\r\n      width: 97%;\r\n      margin:10px auto; \r\n    }\r\n\r\n  .updatapass{\r\n    width: 80%;\r\n    border-radius: 10px;\r\n    font-size:16px;\r\n    p{\r\n      padding:10px; \r\n    } \r\n    input{\r\n      margin: 20px 0 10px 20px;\r\n      width: 80%;\r\n      height: 30px;\r\n      border:0;\r\n      border-bottom: 2px solid #ccc; \r\n    }\r\n    .btn{\r\n      width: 48%;\r\n      margin: 0 auto;\r\n      button{\r\n        margin-right: 10px;\r\n        margin-bottom: 10px;\r\n      }\r\n    }\r\n  }\r\n  }\r\n</style>"]}]}